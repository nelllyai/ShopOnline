!function(){"use strict";const e=e=>JSON.parse(localStorage.getItem(e))||[],t=document.querySelector(".header__menu-button"),a=document.querySelector(".menu");t.addEventListener("click",(()=>{t.classList.toggle("header__menu-button_close"),a.classList.toggle("menu_active")})),(()=>{const t=e("cart").reduce(((e,t)=>e+t.quantity),0);document.querySelector(".header__link_cart").dataset.total=t})();const o=document.querySelectorAll(".footer__list_cover");document.querySelectorAll(".footer__button").forEach(((e,t)=>{e.addEventListener("click",(()=>{e.classList.toggle("footer__button_active");for(let e=0;e<o.length;e++)t===e&&o[e].classList.toggle("footer__list_active")}))}));const s=e=>{const t=document.createElement("li");t.className="footer__item";const a=document.createElement("a");return a.className="footer__link",a.href="category.html?search="+e,a.textContent=e,t.append(a),t},n=e=>{const t=document.createElement("li");t.className="menu__item";const a=document.createElement("a");return a.className="menu__link",a.href="category.html?search="+e,a.textContent=e,t.append(a),t};(async()=>{const e=await(async()=>{const e=await fetch("https://shorthaired-veiled-fascinator.glitch.me/api/category");return await e.json()})(),t=document.querySelector(".footer__list_two-cols"),a=document.querySelector(".menu__list_two-cols");t.append(...e.map(s)),a.append(...e.map(n))})();const r=e=>"image/notimage.jpg"===e?"./img/no-image.png":`https://shorthaired-veiled-fascinator.glitch.me/${e}`,c=({id:e,title:t,price:a,discount:o,image:s})=>{const n=document.createElement("li");n.className="card",n.tabIndex="0";const c=r(s);var l;return n.innerHTML=`\n  <a href="product.html?id=${e}" class="card__link">\n    <div class="card__image-wrapper">\n      <img src="${c}" alt="${t}" class="card__image" width="420" height="295">\n      ${o>0?`<div class="card__discount">-${o}%</div>`:""}\n    </div>\n  \n    <div class="card__price">\n      <p class="card__new-price">${l=((e,t,a)=>t*(e-e*a/100))(a,1,o),Math.round(100*l)/100+" ₽"}</p>\n      ${o>0?`\n      <p class="card__old-price">\n        <span class="visually-hidden">Старая цена</span>${a} ₽\n      </p>\n      `:""}\n    </div>\n  \n    <p class="card__product">${t}</p>\n  </a>\n  `,n},l="https://shorthaired-veiled-fascinator.glitch.me",i=async()=>{const e=await fetch(`${l}/api/goods`);return await e.json()},d={arrows:'\n    <div class="overlay__arrows">\n      <svg width="180" height="180" viewBox="0 0 180 180" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M142.5 60L112.5 90H135C135 114.825 114.825 135 90 135C82.425 135 75.225 133.125 69 129.75L58.05 140.7C67.275 146.55 78.225 150 90 150C123.15 150 150 123.15 150 90H172.5L142.5 60ZM45 90C45 65.175 65.175 45 90 45C97.575 45 104.775 46.875 111 50.25L121.95 39.3C112.725 33.45 101.775 30 90 30C56.85 30 30 56.85 30 90H7.5L37.5 120L67.5 90H45Z" fill="black"/>\n      </svg>\n    </div>',overlay:document.createElement("div"),show(e){this.overlay.classList.add("overlay"),this.overlay.innerHTML=this.arrows,e.append(this.overlay)},showMiddle(e){this.overlay.classList.add("overlay","overlay_middle"),this.overlay.innerHTML=this.arrows,e.append(this.overlay)},showSmall(e){this.overlay.classList.add("overlay","overlay_small"),this.overlay.innerHTML=this.arrows,e.append(this.overlay)},remove(){this.overlay.remove()}};var m=d;const h=document.querySelector(".category-goods__container");m.showSmall(h),(async e=>{const t=new URL(window.location.href).searchParams.get("search"),a=await(async e=>(await i()).filter((t=>t.category.toLowerCase().startsWith(e.toLowerCase()))))(t),o=document.querySelector("h1");o.textContent=t;const s=document.createElement("ul");s.className="category-goods__list";const n=a.map(c);s.append(...n),e.append(o,s)})(h).then((()=>m.remove()))}();